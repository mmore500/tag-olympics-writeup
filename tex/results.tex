\section{Results and Discussion}

\subsection{Geometric Properties}

To gain intuition for how they might affect patterns of tag connectivity, we began by surveying geometric properties of the tag matching metrics.

\input{fig/dimensionality_measure.tex}

\input{fig/sphere.tex}

To gain a sense of the dimensionality (in a loose sense) of the different tag-matching metrics, we sampled the distribution of distances between within a 0.01 match distance radius of an arbitrary target.
We used 5000 samples.
Figure \ref{fig:dimensionality_measure}a provides a cartoon summary of this process.

In a euclidean space, this would correspond to the average distance between points uniformly sampled from inside a ball (in two dimensions, a circle, and in three dimensions, a sphere).
This statistic asymptotically increases with dimensionality (TODO show this with mathematica, also try to calculate asymptote).
In one dimension, this value approximates to 0.00666667 \citep{dunbar1997average}.
In two dimensions, 0.00905415 \citep{dunbar1997average}.
In 32 dimensions, 0.0136618 \citep{dunbar1997average}.

We calculated this statistic as 0.0068 for the bidirectional integer metric, in line with expectations.
As you can see in Figure \ref{fig:sphere_distnplot}, the distances are all bounded by the diameter of 0.02.

However, other metrics had much higher values.
For the Spector Integer metric, we approximated this value as 0.494225945397328.
This is an artifact of the asymmetry where if you have two very similar numbers, half will be in ascending order resulting in a match distance close to 0 and half will be in descending order, resulting in a wraparound search and a match distance close to 1.
You can very clearly see these two outcomes in \ref{fig:sphere_distnplot}.
Averaging this out yields 0.5.

The uniformified hamming had a mean distance of 0.1724647213464.
In our sample, we observed distances as high as 0.756315.
To check our intuition, we calculated this statistic for the raw hamming metric.
For numerical reasons, we raised the radius of our sampling sphere to 0.25 (e.g., with a radius of 0.01, the only result between is a perfect match and with lower radii the hits become so rare as they become difficult to sample efficiently)
in 32 dimensional euclidean space, we expect the mean distance between sampled points to be 0.341545.
In the non-uniformified hamming metric we calculate this statistic as 0.33120625.
The distortion of the uniformification is clearly affecting this statistic with respect to the hamming metric.

We calculated an even higher value of 0.27255493763596844 for the ball sampling statistic with the streak metric.
We calculated distances as high as 0.999346.

For the hash metric, we calculated the ball sampling statistic as 0.17135186630635799.
A well-behaved hash should, given any set of operands, yield hash results uniformly distributed over the range.
However, this doesn't appear to be the case with \texttt{combine\_hash} for tags sampled within a ball.
As can be seen within \ref{fig:sphere_distnplot}, the majority of hash outcomes were distributed towards all zero bitstrings and or, in smaller proportion, to all one bitstrings.
We believe this to be an artifact of the particular hash methodology employed.

\input{fig/sphere_reverse.tex}

We tested the elasticity of the tag-matching metrics using a similar measure.
To gain a sense of the dimensionality (in a loose sense) of the different tag-matching metrics, we sampled the distribution of distances between a tag sampled from within a 0.01 match distance radius of an arbitrary target and a tag sampled from outside a 0.99 match distance radius of the arbitrary target.
We used 5000 samples.
Figure \ref{fig:dimensionality_measure}b provides a cartoon summary of this process.

We found that the bidirectional integer metric was highly inelastic: the smallest distance between the sampled tags was 0.980201.
The mean distance between sampled tags was 0.9932740098.
The Spector integer metric exhibited similarly uniform outcomes, except the distribution was strongly pegged to 0 because of the metric's asymmetry.
The mean statistic was 0.00998706165234.

The hamming metric exhibited greater elasticity: we observed distances between the sampled tags as low as 0.243549.
The mean distance between sampled tags was 0.8266405957999999.

The hamming metric exhibited the greatest elasticity: we observed distances between the sampled tags as low as 0.0011994999999999998.
With this metric, a tag can have a strong attractive interaction with a second tag that a third tag it interacts attractively strongly with has a strong repulsive attraction with.
The mean distance between sampled tags was 0.723582315152.

The hash metric exhibited the same poorly behaved non-uniform distribution as before, with a mean distance of 0.16510482108441799.

\input{fig/detour_difference.tex}

To get a sense of the regularity, in a looses sense, of each space we uniformly sampled triplets of points $A$, $B$, and $C$.
Then, for each metric $m$ we calculated the statistic $m(A, B) + m(B, C) - m(A, C)$.
If the triangle inequality is respected this statistic should be greater than or equal to zero.
Figure \ref{fig:detour_difference} plots the distribution of this statistic for each metric.
The hamming and streak metrics show evidence of ``shortcuts'' that violate the triangle inequality.
It should be noted that the raw hamming metric does respect the triangle inequality.

\subsection{Variational Properties}

\input{fig/mutational_step.tex}

We began by analyzing the distribution of single-bit mutations on match scores under the different metrics.
Figure \ref{fig:mutational_step} provides this analysis for two categories of tag pairs: loosely matched and tightly matched.
To generate the loosely matched distribution we unifomormly selected from tag pairs with a match distance > 0.5, measured their match distance, applied a one-bit mutation to the second tag, and then measured their match distance again.
To generate the tightly matched distribution we picked a target tag.
Then, we uniformly sampled a second tag with a match distance < 0.01.
We measured their match distance, applied a one-bit mutation to the second tag, and then measured their match distance again.
We sampled 5000 measurements for each affinity and each metric.

For both tight and loose affinities, although the integer metrics exhibited no perfectly neutral mutational outcomes most mutations cause very small change in the match score.
These are mutations to the least-significant bits of the bitstring.
A small fraction of mutations under these metrics, affecting the more-significant bits of the bitstring, have a stronger effect.
The integer metrics, along with the hash metric, exhibit the strongest one-step decoupling mutations under tight affinity.
The Spector integer metric, in particular, due to its asymmetrical wraparound-search inducing effect, exhibits more frequent strong decoupling mutations than the bidirectional integer metric.

The streak metric alone exhibits a portion of perfectly neutral outcomes under mutation.
The streak metric exhibits a greater fraction of mutational outcomes of non-trivial magnitude than the integer metrics with loose affinity.
Under tight affinity, the streak metric exhibits some one step strong-decoupling mutations but less intensely than the integer metrics.

The hamming metric exhibits more uniformity in the magnitudes of mutational effects than other metrics under both tight and loose affinities.
The hamming metric exhibits no perfectly neutral mutational outcomes.
(Without uniformification, all hamming metric mutations are of excactly the same magnitude with respect to match score).

The hash metric exhibits the greatest fraction of non-trivial mutational effects and exhibits some mutational intensities as extreme as the integer metrics.

\input{fig/mutational_walk_lineplot.tex}
\input{fig/mutational_walk_barplot.tex}

Next, we performed mutational walks under each metric.
We began with two randomly chosen equivalent tags (mutation step zero) then applied randomly chosen one-step mutations (with the possibility of back mutation allowed) 65 times to the second tag.
We measured match distance between the two tags at each mutational step.
We performed 1000 independent mutational walks from different starting equivalent tags.

Figure \ref{fig:mutational_walk_lineplot} continuously depicts the distribution of match distances on mutational walks, with shaded areas indicating standard deviation, under different metrics.
Figure \ref{fig:mutational_walk_barplot} compares match distances at exponentially increasing steps.
Error bars indicate 95\% confidence intervals.

For the hash metric, where equivalent tags don't necessarily have low match distance, the mutational walk wanders around loose affinity.

The Spector Integer metric, where half of mutational steps wrap back around to 1.0 distance, immediately spikes up to an average match distance of 0.5.
The variance decreases with mutational steps as the distribution moves away from bias towards distances of 0 and 1.

The bidirectional integer metric experiences a greater immediate jump in variance and significantly greater mean match distance as rare mutations affecting significant bits take place (non-overlapping 95\% CI).

The
Intrestingly, contrary to as was claimed in \citep{downing2015intelligence}, the uniformified streak metric's match score under mutation actually grows significantly faster than the hamming metric's match score  (non-overlapping 95\% CI).

Because the are uniformified, the distributions all devolve to having an equivalent mean and variance.

% \subsection{Expressiveness}
%
% best fitness after lots of generations, one link per vs irregular
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=fitness-max+_data_hathash_hash=b681f20513e727bb+_script_fullcat_hash=eb40b1f6164b4595+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% mean bar plot
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
% best fitness after lots of generations, one link per vs irregular
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=fitness-mean-max+_data_hathash_hash=b681f20513e727bb+_script_fullcat_hash=4bad04320cec1da1+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% max bar plot
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
%
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=fitness-line+_data_hathash_hash=b681f20513e727bb+_script_fullcat_hash=97943b1863adc763+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% max line plot
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=fitness-mean-line+_data_hathash_hash=b681f20513e727bb+_script_fullcat_hash=4bad04320cec1da1+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% mean line plot
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
% \subsection{Evolutionary Speed}
%
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=fitness-best+_data_hathash_hash=b681f20513e727bb+_script_fullcat_hash=dbb1d5f8d167dcfb+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% TODO focus on start of evolution, should this be a bar plot of updates until first perfect soluiton?
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
%
% fitness by generation, one link per vs irregular
%
% 16 vs 32 targets
%
% \subsection{Neutrality}
%
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=neutrality-ancestry-line+_data_hathash_hash=c232a31962b449a7+_script_fullcat_hash=2890a55353ee6039+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% Eventually should be a bar plot
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
% \begin{figure*}[!htbp]
% \begin{center}
%   \begin{subfigure}[b]{0.5\linewidth}
%     \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=robustness-bar+_data_hathash_hash=4fe7e4700966f117+_script_fullcat_hash=6ea9986118610f4a+ext=}}}
%     \caption{high mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
%   \begin{subfigure}[b]{0.5\linewidth}
%     TODO
%     \caption{low mutation rate}
%     \label{fig:TODO}
%   \end{subfigure}
% \caption{
% Mutations until first phenotypic change
% }
% \label{fig:TODO}
% \end{center}
% \end{figure*}
%
%
% mutational walk
%
% number of mutations to first phenotypic change
%
% long-term genetic distance
% (e.g., over 16, 64, 256, 1024 generations)
%
% \subsection{Modularity}
%
% \begin{figure*}[!htbp]
% \begin{center}
% \begin{subfigure}[b]{0.5\linewidth}
%   \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=mutation-modularity-violin+_data_hathash_hash=01e5cfbd6360506b+_script_fullcat_hash=6abaf7fcf2beda8b+ext=}}}
%   \caption{violin plot}
%   \label{fig:TODO}
% \end{subfigure}
% \begin{subfigure}[b]{0.5\linewidth}
%   \includegraphics[width=\linewidth]{{{bitweight=0.5+experiment=mid-flex-match+fit-fun=ranked+viz=mutation-modularity-bar+_data_hathash_hash=01e5cfbd6360506b+_script_fullcat_hash=6abaf7fcf2beda8b+ext=}}}
%   \caption{bar graph}
%   \label{fig:TODO}
% \end{subfigure}
% \caption{
% Mean
% }
% \label{fig:modularity}
% \end{center}
% \end{figure*}


\subsection{Promiscuity}

best fitness to try to evolve a hub

REGULATION

ideas: bitweight, wildcards

if first bit set, divide match score by two
