\section{Discussion}

% @AML:
% - From GP results: hash metric most susceptible to mutational meltdowns

% \input{fig/conceptual_geometry.tex}
% First, we performed  %TODO
% If two tags both closely match a third tag, will these two tags be constrained to closely match each other?
% Likewise, if a tag closely matches a second tag, will the tag be constrained to poorly match other tags the second tag poorly matches?
We used geometrical analyses to explore how tag-matching metrics constrain patterns of connectivity between tags, making some configurations unlikely or even impossible.
The bidirectional integer metric exhibited the tightest geometrical constraint in our analyses.
The unidirectional integer metric also exhibited tight geometrical constraint, but quirks of its non-commutative construction allowed that constraint to split across perfect- and worst-matching extremes.
Hamming and streak metrics exhibited looser geometric constraint, with the streak metric allowing for edge cases that very strongly break constraints.
Finally, the hash metric exhibited no geometrical constraint.

Next, we analyzed the effect of bitwise mutation on match distance score under the different metrics.
Under the Hamming metric, all mutations have small effects on match distance score.
In contrast, under the integer metrics, rare mutations can have strong effects on match distance score.
The streak metric also exhibited strong-effect mutations, particularly with respect to coupling loosely-affiliated tags.
The hash metric exhibited the fattest tails of mutational magnitude, with strong-effect mutations occurring frequently.
Interestingly, the hash metric also exhibited sign-outcome frequencies that differed from the other metrics: mutations that decoupled tightly-matching tags and mutations that coupled loosely-matching tags were more frequent compared to other metrics.

The Hamming metric exhibited the greatest robustness to mutation along mutational walks, followed by the streak metric.
The integer metrics, in particular the unidirectional integer metric, exhibited less robustness.
The hash metric, where all one-step mutations scramble match distance, exhibited the least robustness.

In evolutionary experiments, we found that network constraint (the number of tags a query or operand needs to simultaneously establish affinity with) influenced the relative performance of tag-matching metrics.
% In target-matching evolutionary experiments, network constraint corresponded to degree and regularity of the target graphs.
% In the genetic programming experiments, network constraint corresponded to the interconnectedness of module interaction networks that were selected for.

In target-matching evolutionary experiments, we found that the hash metric enabled rapid adaptive evolution toward targets with low network constraint.
This rapid evolution may be due to the hash metric's ability to rapidly generate variation.
Under high network constraint, however, the hash metric yielded poor-quality solutions.
The integer metrics also yielded poor-quality solutions for target graphs with network constraint.
In some more-constrained cases, the streak metric enabled more rapid adaptive evolution than the Hamming metric.


In genetic programming evolutionary experiments, we found that the Hamming and streak metrics yielded successful solutions the most frequently.
On the directional signal task, which tends to require denser (more constrained) interaction networks, we found evidence that the streak metric enabled more rapid adaptive evolution than the Hamming metric.

The hash metric had the next-best performance in SignalGP experiments, yielding more solutions than the integer metrics, which performed comparably poorly.
Although the hash metric performed best in low-constraint target-matching experiments, it was outperformed in low-constraint SignalGP experiments.
This may be due to the presence of duplication and differentiation processes across SignalGP lineages, where instruction and module count can grow over time.

\input{fig/conceptual_geometry.tex}

Relative to the other metrics, the streak metric appears to offer intermediate variational and geometric properties.
Figure \ref{fig:conceptual_geometry} depicts a schematic summary of this observation.
It exhibits some, but not strict, geometric constraint.
Many mutations are neutral or near-neutral (like the integer and Hamming metrics) but a fat tail of extreme-effect mutations also occur (like the hash metric).
The streak metric exhibits robustness under mutational walks that falls between the Hamming and integer metrics.
These mechanistic observations offer a potential explanation for the streak metric's strong performance facilitating adaptive evolution under high-constraint conditions.
However, whether these mechanistic explanations are sufficiently complete --- especially with respect to the streak metric's outperformance of the Hamming metric under high-constraint conditions --- is unclear.

\subsection{Practical Recommendations}

Our results highlight the dependence of tag-matching metrics' performance on  problem domain.
So, consideration of properties of the problem domain at hand should drive the decision of which tag-matching metric to use in a particular system.

A major practical advantage of integer-based metrics is the possibility for log time lookup of operands (i.e., via binary search).
However, the integer metrics performed competitively only within a particular class of problem domains.
In all high-constraint problem domains, the integer metrics performed poorly.
Among low-constraint problem domains, the integer metrics only performed well on the toy graph-matching task --- they did not perform well on the low-constraint GP changing signals task.
At present, it is unclear what problem domain property stymied the integer metrics in the low-constraint GP changing signals task --- the potential for the operand set to grow over time (e.g., duplication and divergence), fitness landscape ruggedness (e.g., epistasis), or something else.

However, within the low-constraint, fixed-size, smooth fitness landscape problem domain where integer metrics performed well, the hash metric actually performed slightly better.
So, under these conditions, the hash metric may be preferable when log time lookup is not critical.

Outside of low-constraint, fixed-size, smooth fitness landscape problem domains, the Hamming and streak metrics perform best.
On the low-constraint, fixed-size, smooth fitness landscape tested, both evolved full solutions, although the Hamming metric was slightly slower than the streak and integer metrics.
In particular, the Hamming and streak metrics performed best in our GP tests.
So, both metrics appear to be reasonable choices in most cases.

Choosing between the two will likely depend on implementation considerations: the streak metric facilitated faster adaptive evolution in some experiments, but is more computationally expensive to calculate than the Hamming metric.
Future work should investigate whether a simplified version of the streak metric --- for example, ignoring mismatching streak length and only considering matching streak length --- suffices to capture its properties.
